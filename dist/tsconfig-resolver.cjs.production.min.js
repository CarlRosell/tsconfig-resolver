"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r,t=require("fs"),n=e(require("json5")),o=require("path"),i=e(o),a=e(require("strip-bom"));function s(){return(s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var c={NotFound:"not-found",InvalidConfig:"invalid-config"},l=function(e){try{return t.lstatSync(e).isDirectory()}catch(e){return!1}},u=function(e){try{return t.lstatSync(e).isFile()}catch(e){return!1}},f={Never:"never",Always:"always",Directory:"directory"},v=((r={})[f.Always]=new Map,r[f.Directory]=new Map,r);exports.CacheStrategy=f,exports.TsConfigErrorReason=c,exports.clearCache=function(){for(var e=0,r=Object.values(v);e<r.length;e++)r[e].clear()},exports.tsconfigResolver=function(e){var r=void 0===e?{}:e,d=r.cwd,p=void 0===d?process.cwd():d,y=r.cacheStrategy,g=void 0===y?f.Never:y,j=r.fileName,w=void 0===j?"tsconfig.json":j,h=function(e){var r=e.cacheStrategy,t=e.cwd,n=e.fileName;return r===f.Always?v[f.Always].get(n):r===f.Directory?v[f.Always].get(o.join(t,n)):void 0}({cwd:p,cacheStrategy:g,fileName:w});if(h)return h;var m=function(e){var r=function(e,r){if(void 0===r&&(r="tsconfig.json"),"tsconfig.json"!==r){var n=o.resolve(e,r),i=l(n)?o.resolve(n,"tsconfig.json"):n;return u(i)?i:void 0}if(t.statSync(e).isFile())return o.resolve(e);var a=function e(r){var n=o.join(r,"./tsconfig.json");if(t.existsSync(n))return n;var i=o.join(r,"../");return r!==i?e(i):void 0}(e);return a?o.resolve(a):void 0}(e.cwd,e.fileName);if(!r)return{exists:!1,reason:c.NotFound};var f=function e(r){var c,f;if(t.existsSync(r)){var v,d,p,y,g=t.readFileSync(r,"utf8"),j=function(e){try{var r=n.parse(e);return r&&"object"==typeof r?r:void 0}catch(e){return}}(a(g)),w=null==j?void 0:j.extends;if(!j||!w)return j;if((d=w,p={}.windows,y=((null!=p?p:"win32"===process.platform)?i.win32.parse:i.parse)(d),s({},y,{isAbsolute:Boolean(y.root),isPackage:!d.startsWith(".")&&!y.root})).isPackage){var h,m=require.resolve(w);l(m)?w=o.join(m,"tsconfig.json"):u(m)?w=m:u(m+".json")&&(w=m+".json"),v=null!==(h=e(w))&&void 0!==h?h:{}}else{var S;w.endsWith(".json")||(w+=".json");var b=o.dirname(r);v=null!==(S=e(o.join(b,w)))&&void 0!==S?S:{}}if(null===(c=v)||void 0===c||null===(f=c.compilerOptions)||void 0===f?void 0:f.baseUrl){var x=o.dirname(w);v.compilerOptions.baseUrl=o.join(x,v.compilerOptions.baseUrl)}return s({},v,{},j,{compilerOptions:s({},v.compilerOptions,{},j.compilerOptions)})}}(r);return f?{exists:!0,path:r,config:f}:{exists:!1,reason:c.InvalidConfig,path:r}}({cwd:p,fileName:w});return function(e,r){var t=e.cacheStrategy,n=e.cwd,i=e.fileName;t===f.Always?v[f.Always].set(i,r):t===f.Directory&&v[f.Always].set(o.join(n,i),r)}({cwd:p,cacheStrategy:g,fileName:w},m),m};
//# sourceMappingURL=tsconfig-resolver.cjs.production.min.js.map
